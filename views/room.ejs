<!DOCTYPE html>
<html>
  <head>
    <title><%= title %> - NodeJS Chat</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1.0,user-scalable=no">
    <link rel='stylesheet' href='/css/index.min.css' />
  </head>
  <body>
    <div class="chat-name top-title">
      <span>
        <a class="top-prev" href="/room">&lt;</a>
      </span>
      <span>
        <a class="top-next" href=<%= '/room/' + roomId + '/member' %>>&amp;</a>
      </span>
      <p><%= title %></p>
    </div>
    <div class="chat">
      <div class="chat-ctx-wrap">
        <div class="chat-ctx">
          <ul class="chat-msg-list"></ul>
        </div>
        <div class="chat-more-wrap">
          <ul class="chat-more">
            <li class="chat-emoji-list">
              <ul class="chat-more-box">
              </ul>
              <span>ğŸ™‚</span>
            </li>
          </ul>
        </div>
        <div class="chat-send">
          <textarea class="chat-msg-send" contenteditable></textarea>
          <div class="chat-send-btn">
            å‘é€
          </div>
        </div>
      </div>
    <script type="text/javascript" src="/js/mobile.js"></script>
    <script type="text/javascript">
      (() => {
        /*
         * Why: Socketçš„ç«¯å£å’Œé¡µé¢ç«¯å£ä¸ä¸€è‡´ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨ç›¸å¯¹è·¯å¾„ï¼Œåªèƒ½ç”¨ç»å¯¹è·¯å¾„ã€‚
         * What: æœ¬åœ°å¼€å‘çš„Hostæ˜¯localhostï¼Œåœ¨çº¿çš„æ˜¯å¯¹åº”çš„ä¸»æœºåã€‚å› æ­¤éœ€è¦åŠ¨æ€è·å–hoståã€‚
         * How: ä¸ºäº†ä¿æŒå¼€å‘å’Œéƒ¨ç½²çš„ä¸€ç›´ï¼Œä½¿ç”¨JSåŠ¨æ€è¾“å‡ºscriptæ ‡ç­¾ã€‚
         */
        const socketScriptTag = document.createElement('script')
        const socketScriptSrc = `http://${document.location.hostname}:8087/socket.io/socket.io.js`
        socketScriptTag.src = socketScriptSrc
        document.head.appendChild(socketScriptTag)
        // index.min.jsä¾èµ–socket.io.js
        // æ‰€ä»¥è¦åœ¨socketæ–‡ä»¶åŠ è½½å®Œæˆåå†åŠ è½½index.min.js
        socketScriptTag.onload = () => {
          const indexScriptTag = document.createElement('script')
          indexScriptTag.src = '/js/index.min.js'
          document.body.appendChild(indexScriptTag)
        }
      })()
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/axios/0.16.2/axios.min.js"></script>
  </body>
</html>
